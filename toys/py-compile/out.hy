(import math) (import pymunk) (import [pyphysicssandbox [*]]) (import pygame) (import [pyphysicssandbox [Vec2d]]) (setv w 505) (setv h 373) (setv user_shapes []) (setv image_bindings []) (setv pivots []) (setv connected_shapes []) (window "Most Awesome Thing Ever" 505 373) (setv obj139 (static_box [(int (- 505/2 505/2)) (int (- 368 5))] 505 10)) (setv obj139.color (Color "white")) (setv obj139.group 139) (setv obj139_image (pygame.image.load "/Users/thoughtstem/Dev/Python/py-fizzery/obj139.png")) (image-bindings.append [obj139 obj139_image]) (user_shapes.append obj139) (setv obj141 (static_box [(int (- 500 5)) (int (- 373/2 353/2))] 10 353)) (setv obj141.color (Color "white")) (setv obj141.group 141) (setv obj141_image (pygame.image.load "/Users/thoughtstem/Dev/Python/py-fizzery/obj141.png")) (image-bindings.append [obj141 obj141_image]) (user_shapes.append obj141) (setv obj137 (cosmetic_ball [(int 505/2) (int 373/2)] 485/2)) (setv obj137.color (Color "white")) (setv obj137.group 137) (setv obj137_image (pygame.image.load "/Users/thoughtstem/Dev/Python/py-fizzery/obj137.png")) (image-bindings.append [obj137 obj137_image]) (user_shapes.append obj137) (setv obj132 (ball [(int 865/2) (int 287)] 20)) (setv obj132.color (Color "white")) (setv obj132.group 132) (setv obj132_image (pygame.image.load "/Users/thoughtstem/Dev/Python/py-fizzery/obj132.png")) (image-bindings.append [obj132 obj132_image]) (user_shapes.append obj132) (setv obj128 (cosmetic_ball [(int 865/2) (int 287)] 21/2)) (setv obj128.color (Color "white")) (setv obj128.group 128) (setv obj128_image (pygame.image.load "/Users/thoughtstem/Dev/Python/py-fizzery/obj128.png")) (image-bindings.append [obj128 obj128_image]) (user_shapes.append obj128) (setv obj126 (ball [(int 785/2) (int 287)] 20)) (setv obj126.color (Color "white")) (setv obj126.group 126) (setv obj126_image (pygame.image.load "/Users/thoughtstem/Dev/Python/py-fizzery/obj126.png")) (image-bindings.append [obj126 obj126_image]) (user_shapes.append obj126) (setv obj122 (cosmetic_ball [(int 785/2) (int 287)] 21/2)) (setv obj122.color (Color "white")) (setv obj122.group 122) (setv obj122_image (pygame.image.load "/Users/thoughtstem/Dev/Python/py-fizzery/obj122.png")) (image-bindings.append [obj122 obj122_image]) (user_shapes.append obj122) (setv obj120 (ball [(int 705/2) (int 287)] 20)) (setv obj120.color (Color "white")) (setv obj120.group 120) (setv obj120_image (pygame.image.load "/Users/thoughtstem/Dev/Python/py-fizzery/obj120.png")) (image-bindings.append [obj120 obj120_image]) (user_shapes.append obj120) (setv obj116 (cosmetic_ball [(int 705/2) (int 287)] 21/2)) (setv obj116.color (Color "white")) (setv obj116.group 116) (setv obj116_image (pygame.image.load "/Users/thoughtstem/Dev/Python/py-fizzery/obj116.png")) (image-bindings.append [obj116 obj116_image]) (user_shapes.append obj116) (setv obj114 (ball [(int 625/2) (int 287)] 20)) (setv obj114.color (Color "white")) (setv obj114.group 114) (setv obj114_image (pygame.image.load "/Users/thoughtstem/Dev/Python/py-fizzery/obj114.png")) (image-bindings.append [obj114 obj114_image]) (user_shapes.append obj114) (setv obj110 (cosmetic_ball [(int 625/2) (int 287)] 21/2)) (setv obj110.color (Color "white")) (setv obj110.group 110) (setv obj110_image (pygame.image.load "/Users/thoughtstem/Dev/Python/py-fizzery/obj110.png")) (image-bindings.append [obj110 obj110_image]) (user_shapes.append obj110) (setv obj108 (ball [(int 545/2) (int 287)] 20)) (setv obj108.color (Color "white")) (setv obj108.group 108) (setv obj108_image (pygame.image.load "/Users/thoughtstem/Dev/Python/py-fizzery/obj108.png")) (image-bindings.append [obj108 obj108_image]) (user_shapes.append obj108) (setv obj104 (cosmetic_ball [(int 545/2) (int 287)] 21/2)) (setv obj104.color (Color "white")) (setv obj104.group 104) (setv obj104_image (pygame.image.load "/Users/thoughtstem/Dev/Python/py-fizzery/obj104.png")) (image-bindings.append [obj104 obj104_image]) (user_shapes.append obj104) (setv obj102 (ball [(int 465/2) (int 287)] 20)) (setv obj102.color (Color "white")) (setv obj102.group 102) (setv obj102_image (pygame.image.load "/Users/thoughtstem/Dev/Python/py-fizzery/obj102.png")) (image-bindings.append [obj102 obj102_image]) (user_shapes.append obj102) (setv obj98 (cosmetic_ball [(int 465/2) (int 287)] 21/2)) (setv obj98.color (Color "white")) (setv obj98.group 98) (setv obj98_image (pygame.image.load "/Users/thoughtstem/Dev/Python/py-fizzery/obj98.png")) (image-bindings.append [obj98 obj98_image]) (user_shapes.append obj98) (setv obj96 (ball [(int 385/2) (int 287)] 20)) (setv obj96.color (Color "white")) (setv obj96.group 96) (setv obj96_image (pygame.image.load "/Users/thoughtstem/Dev/Python/py-fizzery/obj96.png")) (image-bindings.append [obj96 obj96_image]) (user_shapes.append obj96) (setv obj92 (cosmetic_ball [(int 385/2) (int 287)] 21/2)) (setv obj92.color (Color "white")) (setv obj92.group 92) (setv obj92_image (pygame.image.load "/Users/thoughtstem/Dev/Python/py-fizzery/obj92.png")) (image-bindings.append [obj92 obj92_image]) (user_shapes.append obj92) (setv obj90 (ball [(int 305/2) (int 287)] 20)) (setv obj90.color (Color "white")) (setv obj90.group 90) (setv obj90_image (pygame.image.load "/Users/thoughtstem/Dev/Python/py-fizzery/obj90.png")) (image-bindings.append [obj90 obj90_image]) (user_shapes.append obj90) (setv obj86 (cosmetic_ball [(int 305/2) (int 287)] 21/2)) (setv obj86.color (Color "white")) (setv obj86.group 86) (setv obj86_image (pygame.image.load "/Users/thoughtstem/Dev/Python/py-fizzery/obj86.png")) (image-bindings.append [obj86 obj86_image]) (user_shapes.append obj86) (setv obj84 (ball [(int 225/2) (int 287)] 20)) (setv obj84.color (Color "white")) (setv obj84.group 84) (setv obj84_image (pygame.image.load "/Users/thoughtstem/Dev/Python/py-fizzery/obj84.png")) (image-bindings.append [obj84 obj84_image]) (user_shapes.append obj84) (setv obj80 (cosmetic_ball [(int 225/2) (int 287)] 21/2)) (setv obj80.color (Color "white")) (setv obj80.group 80) (setv obj80_image (pygame.image.load "/Users/thoughtstem/Dev/Python/py-fizzery/obj80.png")) (image-bindings.append [obj80 obj80_image]) (user_shapes.append obj80) (setv obj78 (ball [(int 145/2) (int 287)] 20)) (setv obj78.color (Color "white")) (setv obj78.group 78) (setv obj78_image (pygame.image.load "/Users/thoughtstem/Dev/Python/py-fizzery/obj78.png")) (image-bindings.append [obj78 obj78_image]) (user_shapes.append obj78) (setv obj74 (cosmetic_ball [(int 145/2) (int 287)] 21/2)) (setv obj74.color (Color "white")) (setv obj74.group 74) (setv obj74_image (pygame.image.load "/Users/thoughtstem/Dev/Python/py-fizzery/obj74.png")) (image-bindings.append [obj74 obj74_image]) (user_shapes.append obj74) (setv obj73 (cosmetic_ball [(int 505/2) (int 217)] 50)) (setv obj73.color (Color "white")) (setv obj73.group 73) (setv obj73_image (pygame.image.load "/Users/thoughtstem/Dev/Python/py-fizzery/obj73.png")) (image-bindings.append [obj73 obj73_image]) (user_shapes.append obj73) (setv obj70 (ball [(int 785/2) (int 147)] 20)) (setv obj70.color (Color "white")) (setv obj70.group 70) (setv obj70_image (pygame.image.load "/Users/thoughtstem/Dev/Python/py-fizzery/obj70.png")) (image-bindings.append [obj70 obj70_image]) (user_shapes.append obj70) (setv obj66 (cosmetic_ball [(int 785/2) (int 147)] 21/2)) (setv obj66.color (Color "white")) (setv obj66.group 66) (setv obj66_image (pygame.image.load "/Users/thoughtstem/Dev/Python/py-fizzery/obj66.png")) (image-bindings.append [obj66 obj66_image]) (user_shapes.append obj66) (setv obj64 (ball [(int 705/2) (int 147)] 20)) (setv obj64.color (Color "white")) (setv obj64.group 64) (setv obj64_image (pygame.image.load "/Users/thoughtstem/Dev/Python/py-fizzery/obj64.png")) (image-bindings.append [obj64 obj64_image]) (user_shapes.append obj64) (setv obj60 (cosmetic_ball [(int 705/2) (int 147)] 21/2)) (setv obj60.color (Color "white")) (setv obj60.group 60) (setv obj60_image (pygame.image.load "/Users/thoughtstem/Dev/Python/py-fizzery/obj60.png")) (image-bindings.append [obj60 obj60_image]) (user_shapes.append obj60) (setv obj58 (ball [(int 625/2) (int 147)] 20)) (setv obj58.color (Color "white")) (setv obj58.group 58) (setv obj58_image (pygame.image.load "/Users/thoughtstem/Dev/Python/py-fizzery/obj58.png")) (image-bindings.append [obj58 obj58_image]) (user_shapes.append obj58) (setv obj54 (cosmetic_ball [(int 625/2) (int 147)] 21/2)) (setv obj54.color (Color "white")) (setv obj54.group 54) (setv obj54_image (pygame.image.load "/Users/thoughtstem/Dev/Python/py-fizzery/obj54.png")) (image-bindings.append [obj54 obj54_image]) (user_shapes.append obj54) (setv obj52 (ball [(int 545/2) (int 147)] 20)) (setv obj52.color (Color "white")) (setv obj52.group 52) (setv obj52_image (pygame.image.load "/Users/thoughtstem/Dev/Python/py-fizzery/obj52.png")) (image-bindings.append [obj52 obj52_image]) (user_shapes.append obj52) (setv obj48 (cosmetic_ball [(int 545/2) (int 147)] 21/2)) (setv obj48.color (Color "white")) (setv obj48.group 48) (setv obj48_image (pygame.image.load "/Users/thoughtstem/Dev/Python/py-fizzery/obj48.png")) (image-bindings.append [obj48 obj48_image]) (user_shapes.append obj48) (setv obj46 (ball [(int 465/2) (int 147)] 20)) (setv obj46.color (Color "white")) (setv obj46.group 46) (setv obj46_image (pygame.image.load "/Users/thoughtstem/Dev/Python/py-fizzery/obj46.png")) (image-bindings.append [obj46 obj46_image]) (user_shapes.append obj46) (setv obj42 (cosmetic_ball [(int 465/2) (int 147)] 21/2)) (setv obj42.color (Color "white")) (setv obj42.group 42) (setv obj42_image (pygame.image.load "/Users/thoughtstem/Dev/Python/py-fizzery/obj42.png")) (image-bindings.append [obj42 obj42_image]) (user_shapes.append obj42) (setv obj40 (ball [(int 385/2) (int 147)] 20)) (setv obj40.color (Color "white")) (setv obj40.group 40) (setv obj40_image (pygame.image.load "/Users/thoughtstem/Dev/Python/py-fizzery/obj40.png")) (image-bindings.append [obj40 obj40_image]) (user_shapes.append obj40) (setv obj36 (cosmetic_ball [(int 385/2) (int 147)] 21/2)) (setv obj36.color (Color "white")) (setv obj36.group 36) (setv obj36_image (pygame.image.load "/Users/thoughtstem/Dev/Python/py-fizzery/obj36.png")) (image-bindings.append [obj36 obj36_image]) (user_shapes.append obj36) (setv obj34 (ball [(int 305/2) (int 147)] 20)) (setv obj34.color (Color "white")) (setv obj34.group 34) (setv obj34_image (pygame.image.load "/Users/thoughtstem/Dev/Python/py-fizzery/obj34.png")) (image-bindings.append [obj34 obj34_image]) (user_shapes.append obj34) (setv obj30 (cosmetic_ball [(int 305/2) (int 147)] 21/2)) (setv obj30.color (Color "white")) (setv obj30.group 30) (setv obj30_image (pygame.image.load "/Users/thoughtstem/Dev/Python/py-fizzery/obj30.png")) (image-bindings.append [obj30 obj30_image]) (user_shapes.append obj30) (setv obj28 (ball [(int 225/2) (int 147)] 20)) (setv obj28.color (Color "white")) (setv obj28.group 28) (setv obj28_image (pygame.image.load "/Users/thoughtstem/Dev/Python/py-fizzery/obj28.png")) (image-bindings.append [obj28 obj28_image]) (user_shapes.append obj28) (setv obj24 (cosmetic_ball [(int 225/2) (int 147)] 21/2)) (setv obj24.color (Color "white")) (setv obj24.group 24) (setv obj24_image (pygame.image.load "/Users/thoughtstem/Dev/Python/py-fizzery/obj24.png")) (image-bindings.append [obj24 obj24_image]) (user_shapes.append obj24) (setv obj23 (cosmetic_ball [(int 505/2) (int 117)] 10)) (setv obj23.color (Color "white")) (setv obj23.group 23) (setv obj23_image (pygame.image.load "/Users/thoughtstem/Dev/Python/py-fizzery/obj23.png")) (image-bindings.append [obj23 obj23_image]) (user_shapes.append obj23) (setv obj21 (cosmetic_ball [(int 355) (int 173/2)] 50)) (setv obj21.color (Color "white")) (setv obj21.group 21) (setv obj21_image (pygame.image.load "/Users/thoughtstem/Dev/Python/py-fizzery/obj21.png")) (image-bindings.append [obj21 obj21_image]) (user_shapes.append obj21) (setv obj20 (box [(int (- 569/2 41/2)) (int (- 173/2 41/2))] 41 41)) (setv obj20.color (Color "white")) (setv obj20.group 20) (setv obj20_image (pygame.image.load "/Users/thoughtstem/Dev/Python/py-fizzery/obj20.png")) (image-bindings.append [obj20 obj20_image]) (user_shapes.append obj20) (setv obj16 (box [(int (- 487/2 41/2)) (int (- 173/2 41/2))] 41 41)) (setv obj16.color (Color "white")) (setv obj16.group 16) (setv obj16_image (pygame.image.load "/Users/thoughtstem/Dev/Python/py-fizzery/obj16.png")) (image-bindings.append [obj16 obj16_image]) (user_shapes.append obj16) (setv obj12 (box [(int (- 405/2 41/2)) (int (- 173/2 41/2))] 41 41)) (setv obj12.color (Color "white")) (setv obj12.group 12) (setv obj12_image (pygame.image.load "/Users/thoughtstem/Dev/Python/py-fizzery/obj12.png")) (image-bindings.append [obj12 obj12_image]) (user_shapes.append obj12) (setv obj8 (box [(int (- 323/2 41/2)) (int (- 173/2 41/2))] 41 41)) (setv obj8.color (Color "white")) (setv obj8.group 8) (setv obj8_image (pygame.image.load "/Users/thoughtstem/Dev/Python/py-fizzery/obj8.png")) (image-bindings.append [obj8 obj8_image]) (user_shapes.append obj8) (setv obj4 (box [(int (- 241/2 41/2)) (int (- 173/2 41/2))] 41 41)) (setv obj4.color (Color "white")) (setv obj4.group 4) (setv obj4_image (pygame.image.load "/Users/thoughtstem/Dev/Python/py-fizzery/obj4.png")) (image-bindings.append [obj4 obj4_image]) (user_shapes.append obj4) (setv obj141 (static_box [(int (- 5 5)) (int (- 373/2 353/2))] 10 353)) (setv obj141.color (Color "white")) (setv obj141.group 141) (setv obj141_image (pygame.image.load "/Users/thoughtstem/Dev/Python/py-fizzery/obj141.png")) (image-bindings.append [obj141 obj141_image]) (user_shapes.append obj141) (setv obj139 (static_box [(int (- 505/2 505/2)) (int (- 5 5))] 505 10)) (setv obj139.color (Color "white")) (setv obj139.group 139) (setv obj139_image (pygame.image.load "/Users/thoughtstem/Dev/Python/py-fizzery/obj139.png")) (image-bindings.append [obj139 obj139_image]) (user_shapes.append obj139) (do (setv (. obj132 mass) 10)) (motor obj132 -5) (do (setv pivot128 (pivot (, 865/2 287))) (pivots.append pivot128)) (do (pivot128.connect obj132)) (do (setv (. obj126 mass) 10)) (motor obj126 -5) (do (setv pivot122 (pivot (, 785/2 287))) (pivots.append pivot122)) (do (pivot122.connect obj126)) (do (setv (. obj120 mass) 10)) (motor obj120 -5) (do (setv pivot116 (pivot (, 705/2 287))) (pivots.append pivot116)) (do (pivot116.connect obj120)) (do (setv (. obj114 mass) 10)) (motor obj114 -5) (do (setv pivot110 (pivot (, 625/2 287))) (pivots.append pivot110)) (do (pivot110.connect obj114)) (do (setv (. obj108 mass) 10)) (motor obj108 -5) (do (setv pivot104 (pivot (, 545/2 287))) (pivots.append pivot104)) (do (pivot104.connect obj108)) (do (setv (. obj102 mass) 10)) (motor obj102 -5) (do (setv pivot98 (pivot (, 465/2 287))) (pivots.append pivot98)) (do (pivot98.connect obj102)) (do (setv (. obj96 mass) 10)) (motor obj96 -5) (do (setv pivot92 (pivot (, 385/2 287))) (pivots.append pivot92)) (do (pivot92.connect obj96)) (do (setv (. obj90 mass) 10)) (motor obj90 -5) (do (setv pivot86 (pivot (, 305/2 287))) (pivots.append pivot86)) (do (pivot86.connect obj90)) (do (setv (. obj84 mass) 10)) (motor obj84 -5) (do (setv pivot80 (pivot (, 225/2 287))) (pivots.append pivot80)) (do (pivot80.connect obj84)) (do (setv (. obj78 mass) 10)) (motor obj78 -5) (do (setv pivot74 (pivot (, 145/2 287))) (pivots.append pivot74)) (do (pivot74.connect obj78)) (do (setv (. obj70 mass) 10)) (motor obj70 5) (do (setv pivot66 (pivot (, 785/2 147))) (pivots.append pivot66)) (do (pivot66.connect obj70)) (do (setv (. obj64 mass) 10)) (motor obj64 5) (do (setv pivot60 (pivot (, 705/2 147))) (pivots.append pivot60)) (do (pivot60.connect obj64)) (do (setv (. obj58 mass) 10)) (motor obj58 5) (do (setv pivot54 (pivot (, 625/2 147))) (pivots.append pivot54)) (do (pivot54.connect obj58)) (do (setv (. obj52 mass) 10)) (motor obj52 5) (do (setv pivot48 (pivot (, 545/2 147))) (pivots.append pivot48)) (do (pivot48.connect obj52)) (do (setv (. obj46 mass) 10)) (motor obj46 5) (do (setv pivot42 (pivot (, 465/2 147))) (pivots.append pivot42)) (do (pivot42.connect obj46)) (do (setv (. obj40 mass) 10)) (motor obj40 5) (do (setv pivot36 (pivot (, 385/2 147))) (pivots.append pivot36)) (do (pivot36.connect obj40)) (do (setv (. obj34 mass) 10)) (motor obj34 5) (do (setv pivot30 (pivot (, 305/2 147))) (pivots.append pivot30)) (do (pivot30.connect obj34)) (do (setv (. obj28 mass) 10)) (motor obj28 5) (do (setv pivot24 (pivot (, 225/2 147))) (pivots.append pivot24)) (do (pivot24.connect obj28)) (do (setv (. obj20 mass) 10)) (do (obj20.hit [0 0] obj20.position)) (do (setv (. obj16 mass) 10)) (do (obj16.hit [0 0] obj16.position)) (do (setv (. obj12 mass) 10)) (do (obj12.hit [0 0] obj12.position)) (do (setv (. obj8 mass) 10)) (do (obj8.hit [0 0] obj8.position)) (do (setv (. obj4 mass) 10)) (do (obj4.hit [0 0] obj4.position)) (defn image-for [s] (do (global image-bindings) (for (b image-bindings) (if (= (. b [0]) s) (return (. b [1])))) (return False))) (defn draw-images [cosmetic] (do (defn f [keys] (do (global user-shapes) (for (s user-shapes) (if (not (image-for s)) (continue)) (if (not (= cosmetic (. s _cosmetic))) (continue)) (if (not (. s active)) (continue)) (if (. s body) (setv p (Vec2d (. s body position x) (. s body position y))) (setv p (Vec2d (. s _x) (. s _y)))) (setv angle 0) (if (. s body) (setv angle (. s body angle))) (setv angle_degrees (math.degrees angle)) (setv rotated_logo_img (pygame.transform.rotate (image-for s) (* -1 angle-degrees))) (setv offset (/ (Vec2d (rotated_logo_img.get_size)) 2)) (setv p (- p offset)) (setv screen (pygame.display.get-surface)) (screen.blit rotated_logo_img p)))) (return f))) (defn draw_pivot_lines [keys] (do (global pivots) (for (p pivots) (setv start (. p body position)) (for (j (. p shape)) (setv other (. j a)) (setv end (. other position)) (setv screen (pygame.display.get_surface)) (pygame.draw.line screen (Color "black") start end))))) (defn draw_connection_lines [keys] (do (global pivots) (for (c connected_shapes) (setv start (. c [0] body position)) (setv end (. c [1] body position)) (if (or (not (. c [0] active)) (not (. c [0] active))) (continue)) (setv screen (pygame.display.get_surface)) (pygame.draw.line screen (Color "black") start end)))) (add-observer (draw-images True)) (add-observer draw_pivot_lines) (add-observer draw_connection_lines) (add-observer (draw-images False)) (run)